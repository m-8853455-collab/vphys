<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guided Work–Energy Solver (Visual) | VPhys</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #eef2f7;
}
header, footer {
  background: #1e3a8a;
  color: white;
  text-align: center;
  padding: 15px;
}
section {
  background: white;
  margin: 15px auto;
  padding: 15px;
  width: 92%;
  border-radius: 8px;
}
button {
  padding: 8px 12px;
  background: #1e3a8a;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 10px;
}
.box {
  background: #f4f6ff;
  padding: 12px;
  border-left: 4px solid #1e3a8a;
  margin-top: 10px;
}
input, select {
  width: 100%;
  padding: 6px;
  margin: 4px 0;
}
.hidden { display: none; }
hr { border: none; border-top: 1px solid #ccc; margin: 10px 0; }
canvas {
  border: 1px solid #ccc;
  display: block;
  margin: 10px auto;
}
</style>
</head>

<body>

<header>
<h1>Guided Work–Energy Theorem Solver</h1>
<p>Step-by-step reasoning with diagrams</p>
</header>

<section>
<h2>1️⃣ Select Problem Type</h2>
<select id="ptype" onchange="selectProblem()">
  <option value="">-- Select --</option>
  <option value="incline">Inclined Plane with Friction</option>
  <option value="spring">Spring Compression</option>
  <option value="pulley">Pulley System</option>
</select>
</section>

<section id="inputs" class="hidden">
<h2>2️⃣ Given Values</h2>

<div id="inclineInputs" class="hidden">
Mass (kg): <input id="im" value="20">
Angle (°): <input id="itheta" value="25">
Distance (m): <input id="is" value="3.8">
Force (N): <input id="iF" value="250">
μ: <input id="imu" value="0.3">
</div>

<div id="springInputs" class="hidden">
Mass (kg): <input id="sm" value="2">
Height (m): <input id="sh" value="0.3">
k (N/m): <input id="sk" value="2000">
</div>

<div id="pulleyInputs" class="hidden">
Mass A (kg): <input id="pm1" value="1">
Mass B (kg): <input id="pm2" value="2">
Distance (m): <input id="pd" value="0.5">
Speed (m/s): <input id="pv" value="2">
</div>

<button onclick="startGuided()">Start Guided Solution</button>
</section>

<section id="guided" class="hidden">
<h2>3️⃣ Step-by-Step Solution</h2>
<canvas id="diagram" width="500" height="220"></canvas>
<div id="guideBox" class="box"></div>
<button onclick="nextStep()">Next Step</button>
</section>

<footer>
<p>© VPhys – Visual Concept-Based Learning</p>
</footer>

<script>
let step = 0;
let type = "";
const g = 9.8;
const ctx = document.getElementById("diagram").getContext("2d");

function clearCanvas() {
  ctx.clearRect(0,0,500,220);
  ctx.font = "14px Arial";
}

function selectProblem() {
  type = ptype.value;
  inputs.classList.remove("hidden");
  guided.classList.add("hidden");
  guideBox.innerHTML = "";
  step = 0;

  inclineInputs.classList.add("hidden");
  springInputs.classList.add("hidden");
  pulleyInputs.classList.add("hidden");

  if (type === "incline") inclineInputs.classList.remove("hidden");
  if (type === "spring") springInputs.classList.remove("hidden");
  if (type === "pulley") pulleyInputs.classList.remove("hidden");
}

function startGuided() {
  guided.classList.remove("hidden");
  guideBox.innerHTML = "";
  step = 0;
  nextStep();
}

function drawIncline(stage) {
  clearCanvas();
  ctx.beginPath();
  ctx.moveTo(50,180);
  ctx.lineTo(400,180);
  ctx.lineTo(400,120);
  ctx.stroke();

  ctx.fillRect(260,130,40,40);

  if (stage >= 1) {
    ctx.fillText("mg", 260, 190);
    ctx.fillText("F", 320, 140);
    ctx.fillText("f", 230, 140);
  }
}

function drawSpring(stage) {
  clearCanvas();
  ctx.fillRect(230,40,40,40);
  ctx.beginPath();
  ctx.moveTo(250,80);
  ctx.lineTo(250,170);
  ctx.stroke();

  if (stage >= 1)
    ctx.fillText("Spring compressing", 170,200);
}

function drawPulley(stage) {
  clearCanvas();
  ctx.beginPath();
  ctx.arc(250,50,20,0,Math.PI*2);
  ctx.stroke();

  ctx.fillRect(210,90,40,40);
  ctx.fillRect(290,90,40,40);

  if (stage >= 1) {
    ctx.fillText("m₁",215,150);
    ctx.fillText("m₂",295,150);
  }
}

function nextStep() {

  /* ---------- INCLINE ---------- */
  if (type === "incline") {
    drawIncline(step);

    if (step === 0)
      guideBox.innerHTML += "<hr><b>Step 1:</b> Block moves up the inclined plane.";

    if (step === 1)
      guideBox.innerHTML += "<hr><b>Step 2:</b> Forces: gravity & friction oppose motion.";

    if (step === 2)
      guideBox.innerHTML += "<hr><b>Step 3:</b> Use Work–Energy Theorem.";

    if (step === 3)
      guideBox.innerHTML += "<hr><b>Step 4:</b> Write work expressions.";

    if (step === 4)
      guideBox.innerHTML += "<hr><b>Final Answer:</b> Total work equals change in KE.";
  }

  /* ---------- SPRING ---------- */
  if (type === "spring") {
    drawSpring(step);

    if (step === 0)
      guideBox.innerHTML += "<hr><b>Step 1:</b> Object falls from rest.";

    if (step === 1)
      guideBox.innerHTML += "<hr><b>Step 2:</b> Spring compresses, KE → 0.";

    if (step === 2)
      guideBox.innerHTML += "<hr><b>Step 3:</b> Energy equation mgh = ½kx².";

    if (step === 3)
      guideBox.innerHTML += "<hr><b>Final Answer:</b> Solve for maximum compression.";
  }

  /* ---------- PULLEY ---------- */
  if (type === "pulley") {
    drawPulley(step);

    if (step === 0)
      guideBox.innerHTML += "<hr><b>Step 1:</b> One mass moves down.";

    if (step === 1)
      guideBox.innerHTML += "<hr><b>Step 2:</b> Energy changes in system.";

    if (step === 2)
      guideBox.innerHTML += "<hr><b>Step 3:</b> ΔPE + Wf = ΔKE.";

    if (step === 3)
      guideBox.innerHTML += "<hr><b>Final Answer:</b> Find work by friction.";
  }

  step++;
}
</script>

</body>
</html>
