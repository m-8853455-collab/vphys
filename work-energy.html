<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guided Work–Energy Theorem Solver | VPhys</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #eef2f7;
}
header, footer {
  background: #1e3a8a;
  color: white;
  text-align: center;
  padding: 15px;
}
section {
  background: white;
  margin: 15px auto;
  padding: 15px;
  width: 92%;
  border-radius: 8px;
}
button {
  padding: 8px 12px;
  background: #1e3a8a;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 10px;
}
.box {
  background: #f4f6ff;
  padding: 12px;
  border-left: 4px solid #1e3a8a;
  margin-top: 10px;
}
input, select {
  width: 100%;
  padding: 6px;
  margin: 4px 0;
}
.hidden { display: none; }
hr { border: none; border-top: 1px solid #ccc; margin: 10px 0; }
</style>
</head>

<body>

<header>
<h1>Guided Work–Energy Theorem Solver</h1>
<p>Learn concepts • See steps • Understand answers</p>
</header>

<section>
<h2>1️⃣ Select Problem Type</h2>
<select id="ptype" onchange="selectProblem()">
  <option value="">-- Select --</option>
  <option value="incline">Inclined Plane with Friction</option>
  <option value="spring">Spring Compression (Falling Object)</option>
  <option value="pulley">Pulley System</option>
</select>
</section>

<section id="inputs" class="hidden">
<h2>2️⃣ Given Values</h2>

<div id="inclineInputs" class="hidden">
Mass (kg): <input id="im" value="20">
Angle (°): <input id="itheta" value="25">
Distance (m): <input id="is" value="3.8">
Applied Force (N): <input id="iF" value="250">
Coefficient of friction μ: <input id="imu" value="0.3">
</div>

<div id="springInputs" class="hidden">
Mass (kg): <input id="sm" value="2">
Height h (m): <input id="sh" value="0.3">
Spring constant k (N/m): <input id="sk" value="2000">
</div>

<div id="pulleyInputs" class="hidden">
Mass A (kg): <input id="pm1" value="1">
Mass B (kg): <input id="pm2" value="2">
Distance moved (m): <input id="pd" value="0.5">
Final speed (m/s): <input id="pv" value="2">
</div>

<button onclick="startGuided()">Start Guided Solution</button>
</section>

<section id="guided" class="hidden">
<h2>3️⃣ Step-by-Step Solution</h2>
<div id="guideBox" class="box"></div>
<button onclick="nextStep()">Next Step</button>
</section>

<footer>
<p>© VPhys – Concept-Based Physics Learning</p>
</footer>

<script>
let step = 0;
let type = "";
const g = 9.8;

function selectProblem() {
  type = ptype.value;
  inputs.classList.remove("hidden");
  guided.classList.add("hidden");
  guideBox.innerHTML = "";
  step = 0;

  inclineInputs.classList.add("hidden");
  springInputs.classList.add("hidden");
  pulleyInputs.classList.add("hidden");

  if (type === "incline") inclineInputs.classList.remove("hidden");
  if (type === "spring") springInputs.classList.remove("hidden");
  if (type === "pulley") pulleyInputs.classList.remove("hidden");
}

function startGuided() {
  guided.classList.remove("hidden");
  guideBox.innerHTML = "";
  step = 0;
  nextStep();
}

function nextStep() {

  /* ================= INCLINED PLANE ================= */
  if (type === "incline") {
    const m = +im.value;
    const θ = itheta.value * Math.PI / 180;
    const s = +is.value;
    const F = +iF.value;
    const μ = +imu.value;
    const N = m * g * Math.cos(θ);
    const fk = μ * N;
    const W = F*s - m*g*s*Math.sin(θ) - fk*s;

    if (step === 0)
      guideBox.innerHTML +=
        "<hr><b>Step 1: Understanding the motion</b><br>" +
        "The block moves <b>up the plane</b>. Gravity and friction oppose the motion.";

    if (step === 1)
      guideBox.innerHTML +=
        "<hr><b>Step 2: Forces doing work</b><br>" +
        "• Applied force → positive work<br>" +
        "• Gravity → negative work<br>" +
        "• Friction → negative work<br>" +
        "• Normal reaction → zero work";

    if (step === 2)
      guideBox.innerHTML +=
        "<hr><b>Step 3: Work–Energy Theorem</b><br>" +
        "Total work done = change in kinetic energy<br>" +
        "W<sub>F</sub> + W<sub>g</sub> + W<sub>f</sub> = ΔKE";

    if (step === 3)
      guideBox.innerHTML +=
        "<hr><b>Step 4: Writing expressions</b><br>" +
        "W<sub>F</sub> = Fs<br>" +
        "W<sub>g</sub> = −mg s sinθ<br>" +
        "W<sub>f</sub> = −μmg cosθ · s";

    if (step === 4)
      guideBox.innerHTML +=
        "<hr><b>Step 5: Final Answer</b><br>" +
        "Total work done = <b>" + W.toFixed(2) + " J</b><br>" +
        "This equals the change in kinetic energy.";

  }

  /* ================= SPRING COMPRESSION ================= */
  if (type === "spring") {
    const m = +sm.value;
    const h = +sh.value;
    const k = +sk.value;
    const x = Math.sqrt((2*m*g*h)/k);

    if (step === 0)
      guideBox.innerHTML +=
        "<hr><b>Step 1: Concept</b><br>" +
        "The object falls and compresses the spring. Gravitational potential energy converts to elastic potential energy.";

    if (step === 1)
      guideBox.innerHTML +=
        "<hr><b>Step 2: Condition at maximum compression</b><br>" +
        "Velocity becomes zero, so kinetic energy is zero.";

    if (step === 2)
      guideBox.innerHTML +=
        "<hr><b>Step 3: Energy equation</b><br>" +
        "mgh = ½kx²";

    if (step === 3)
      guideBox.innerHTML +=
        "<hr><b>Step 4: Substitution</b><br>" +
        "Substitute the given values of m, g, h and k.";

    if (step === 4)
      guideBox.innerHTML +=
        "<hr><b>Final Answer</b><br>" +
        "Maximum compression of spring:<br>" +
        "<b>x = " + x.toFixed(3) + " m</b>";

  }

  /* ================= PULLEY SYSTEM ================= */
  if (type === "pulley") {
    const m1 = +pm1.value;
    const m2 = +pm2.value;
    const d = +pd.value;
    const v = +pv.value;
    const Wf = 0.5*(m1+m2)*v*v - m2*g*d;

    if (step === 0)
      guideBox.innerHTML +=
        "<hr><b>Step 1: Concept</b><br>" +
        "One mass moves downward, losing gravitational potential energy.";

    if (step === 1)
      guideBox.innerHTML +=
        "<hr><b>Step 2: Energy changes</b><br>" +
        "Potential energy decreases, kinetic energy increases, friction does negative work.";

    if (step === 2)
      guideBox.innerHTML +=
        "<hr><b>Step 3: Work–Energy equation</b><br>" +
        "ΔPE + W<sub>f</sub> = ΔKE";

    if (step === 3)
      guideBox.innerHTML +=
        "<hr><b>Step 4: Writing expressions</b><br>" +
        "m₂gd + W<sub>f</sub> = ½(m₁ + m₂)v²";

    if (step === 4)
      guideBox.innerHTML +=
        "<hr><b>Final Answer</b><br>" +
        "Work done by friction = <b>" + Wf.toFixed(2) + " J</b><br>" +
        "Negative sign indicates loss of mechanical energy.";

  }

  step++;
}
</script>

</body>
</html>
