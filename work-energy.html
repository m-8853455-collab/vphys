<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guided Work–Energy Solver | VPhys</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #eef2f7;
}
header, footer {
  background: #1e3a8a;
  color: white;
  text-align: center;
  padding: 15px;
}
section {
  background: white;
  margin: 15px auto;
  padding: 15px;
  width: 92%;
  border-radius: 8px;
}
button {
  padding: 8px 12px;
  margin-top: 10px;
  background: #1e3a8a;
  color: white;
  border: none;
  cursor: pointer;
}
.box {
  background: #f4f6ff;
  padding: 12px;
  border-left: 4px solid #1e3a8a;
  margin-top: 10px;
}
input {
  width: 100%;
  padding: 6px;
  margin: 4px 0;
}
.hidden { display: none; }
</style>
</head>

<body>

<header>
<h1>Guided Work–Energy Theorem Solver</h1>
<p>Learn HOW to solve, not just the answer</p>
</header>

<section>
<h2>1️⃣ Select Problem Type</h2>
<select id="ptype" onchange="selectProblem()">
  <option value="">-- Select --</option>
  <option value="incline">Inclined Plane with Friction</option>
  <option value="spring">Spring Compression (Falling Object)</option>
  <option value="pulley">Pulley System with Friction</option>
</select>
</section>

<!-- INPUTS -->
<section id="inputs" class="hidden">
<h2>2️⃣ Given Values</h2>

<div id="inclineInputs" class="hidden">
Mass (kg): <input id="im" value="20">
Angle (°): <input id="itheta" value="25">
Distance (m): <input id="is" value="3.8">
Force F (N): <input id="iF" value="250">
Friction μ: <input id="imu" value="0.3">
</div>

<div id="springInputs" class="hidden">
Mass (kg): <input id="sm" value="2">
Drop height h (m): <input id="sh" value="0.3">
Spring constant k (N/m): <input id="sk" value="2000">
</div>

<div id="pulleyInputs" class="hidden">
Mass A (kg): <input id="pm1" value="1">
Mass B (kg): <input id="pm2" value="2">
Distance moved (m): <input id="pd" value="0.5">
Final speed (m/s): <input id="pv" value="2">
</div>

<button onclick="startGuided()">Start Guided Solution</button>
</section>

<!-- GUIDED STEPS -->
<section id="guided" class="hidden">
<h2>3️⃣ Guided Solution</h2>
<div id="guideBox" class="box"></div>
<button onclick="nextStep()">Next Step</button>
</section>

<footer>
<p>© VPhys – Concept-Based Physics Learning</p>
</footer>

<script>
let step = 0;
let type = "";
const g = 9.8;

function selectProblem() {
  type = ptype.value;
  inputs.classList.remove("hidden");
  guided.classList.add("hidden");
  step = 0;

  inclineInputs.classList.add("hidden");
  springInputs.classList.add("hidden");
  pulleyInputs.classList.add("hidden");

  if (type === "incline") inclineInputs.classList.remove("hidden");
  if (type === "spring") springInputs.classList.remove("hidden");
  if (type === "pulley") pulleyInputs.classList.remove("hidden");
}

function startGuided() {
  guided.classList.remove("hidden");
  step = 0;
  nextStep();
}

function nextStep() {
  const box = guideBox;

  /* ---------- INCLINED PLANE ---------- */
  if (type === "incline") {
    const m = +im.value;
    const θ = itheta.value * Math.PI / 180;
    const s = +is.value;
    const F = +iF.value;
    const μ = +imu.value;

    const N = m * g * Math.cos(θ);
    const fk = μ * N;

    if (step === 0)
      box.innerHTML = "<b>Step 1: Motion</b><br>The box moves UP the plane. Gravity and friction oppose motion.";

    if (step === 1)
      box.innerHTML = "<b>Step 2: Forces Doing Work</b><br>✔ Applied force (+)<br>✔ Gravity (−)<br>✔ Friction (−)<br>✖ Normal (0)";

    if (step === 2)
      box.innerHTML = "<b>Step 3: Work–Energy Equation</b><br>W<sub>F</sub> + W<sub>g</sub> + W<sub>f</sub> = ΔKE";

    if (step === 3)
      box.innerHTML =
        `W<sub>F</sub> = Fs = ${(F*s).toFixed(2)} J<br>
         W<sub>g</sub> = −mg s sinθ = ${(-m*g*s*Math.sin(θ)).toFixed(2)} J<br>
         W<sub>f</sub> = −μN s = ${(-fk*s).toFixed(2)} J`;

    if (step === 4)
      box.innerHTML =
        `<b>Total Work = ${(F*s - m*g*s*Math.sin(θ) - fk*s).toFixed(2)} J</b><br>
         This equals change in kinetic energy.`;

  }

  /* ---------- SPRING ---------- */
  if (type === "spring") {
    const m = +sm.value;
    const h = +sh.value;
    const k = +sk.value;

    if (step === 0)
      box.innerHTML = "<b>Step 1:</b> Object falls from rest → gains gravitational energy.";

    if (step === 1)
      box.innerHTML = "<b>Step 2:</b> At maximum compression, velocity = 0 → KE = 0.";

    if (step === 2)
      box.innerHTML = "<b>Step 3:</b> Use energy conservation:<br>mgh = ½kx²";

    if (step === 3)
      box.innerHTML =
        `Substitute values:<br>
         (${m})(9.8)(${h}) = ½(${k})x²`;

    if (step === 4)
      box.innerHTML =
        `<b>x = ${Math.sqrt((2*m*g*h)/k).toFixed(3)} m</b><br>
         Negative root rejected (no physical meaning).`;
  }

  /* ---------- PULLEY ---------- */
  if (type === "pulley") {
    const m1 = +pm1.value;
    const m2 = +pm2.value;
    const d = +pd.value;
    const v = +pv.value;

    if (step === 0)
      box.innerHTML = "<b>Step 1:</b> System starts from rest.";

    if (step === 1)
      box.innerHTML = "<b>Step 2:</b> Loss of PE of hanging mass = work input.";

    if (step === 2)
      box.innerHTML = "<b>Step 3:</b> Work–Energy equation:<br>ΔPE + W<sub>f</sub> = ΔKE";

    if (step === 3)
      box.innerHTML =
        `ΔKE = ½(m₁+m₂)v² = ${(0.5*(m1+m2)*v*v).toFixed(2)} J<br>
         ΔPE = m₂gd = ${(m2*g*d).toFixed(2)} J`;

    if (step === 4)
      box.innerHTML =
        `<b>Work by friction = ${(0.5*(m1+m2)*v*v - m2*g*d).toFixed(2)} J</b>`;
  }

  step++;
}
</script>

</body>
</html>
