<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys – The Virtual Physics Lab</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #eef2f7;
}
header {
    background: #1e3a8a;
    color: white;
    padding: 20px;
    text-align: center;
}
.container {
    display: flex;
    gap: 20px;
    margin: 20px;
}
section {
    background: white;
    padding: 20px;
    border-radius: 8px;
}
.controls {
    width: 340px;
}
canvas {
    border: 1px solid black;
    background: #e6f7fb;
    touch-action: none;
}
h2, h3 {
    color: #1e3a8a;
}
button {
    padding: 8px 14px;
    background: #1e3a8a;
    color: white;
    border: none;
    border-radius: 5px;
    margin-top: 6px;
    cursor: pointer;
}
footer {
    background: #1e3a8a;
    color: white;
    text-align: center;
    padding: 10px;
}

/* ===== FORMULA TABLE ===== */
.formula-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}
.formula-table th,
.formula-table td {
    border: 1px solid #333;
    padding: 8px;
    text-align: center;
}
.formula-table th {
    background: #1e3a8a;
    color: white;
}
.formula-table td {
    font-family: "Courier New", monospace;
    font-size: 14px;
}
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>The Virtual Physics Lab</p>
</header>

<div class="container">

<!-- ===== SIMULATION SPACE ===== -->
<section>
<canvas id="sim" width="600" height="350"></canvas>

<h3>Projectile Motion Formula Reference</h3>

<table class="formula-table">
<tr>
    <th>x-axis (Horizontal)</th>
    <th>y-axis (Vertical)</th>
</tr>
<tr>
    <td>aₓ = 0</td>
    <td>aᵧ = −g</td>
</tr>
<tr>
    <td>Vₓ = uₓ</td>
    <td>Vᵧ = uᵧ − gt</td>
</tr>
<tr>
    <td>Vₓ² = uₓ²</td>
    <td>Vᵧ² = uᵧ² − 2gSᵧ</td>
</tr>
<tr>
    <td>Sₓ = uₓt</td>
    <td>Sᵧ = uᵧt − ½gt²</td>
</tr>
<tr>
    <td>Sₓ = ½(uₓ + Vₓ)t</td>
    <td>Sᵧ = ½(uᵧ + Vᵧ)t</td>
</tr>
</table>

<p style="font-size:13px;color:#555;margin-top:6px;">
<i>Note: Horizontal and vertical motions are analysed independently.</i>
</p>

</section>

<!-- ===== CONTROLS ===== -->
<section class="controls">

<h3>Projectile Inputs</h3>

<p>Initial speed u (m/s)</p>
<input type="number" id="u" value="20">

<p>Launch angle θ (°)</p>
<input type="number" id="theta" value="45">

<p>Platform height h (m)</p>
<input type="number" id="platformH" value="5">

<p>Environment</p>
<select id="env">
    <option value="9.8">Earth</option>
    <option value="1.62">Moon</option>
</select>

<button onclick="launch()">▶ Start</button>

<hr>

<h3>Results</h3>
<p>t = <span id="time">–</span> s</p>
<p>Sx = <span id="sx">–</span> m</p>
<p>Sy = <span id="sy">–</span> m</p>
<p>Vx = <span id="vx">–</span> m/s</p>
<p>Vy = <span id="vy">–</span> m/s</p>
<p>v = <span id="vr">–</span> m/s</p>

</section>
</div>

<footer>
&copy; 2026 VPhys – The Virtual Physics Lab
</footer>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

const groundY = canvas.height - 20;
let scale = 5;

let platformHeight = 0;
let path = [];
let dragIndex = 0;
let dragging = false;
let animIndex = 0;
let animating = false;

function launch() {
    const u = +uInput.value;
    const thetaDeg = +thetaInput.value;
    const theta = thetaDeg * Math.PI / 180;
    const g = +env.value;
    platformHeight = +platformH.value;

    const ux = u * Math.cos(theta);
    const uy = u * Math.sin(theta);

    path = [{x:0, y:platformHeight, ux, uy, t:0}];
    for (let t=0.05; t<30; t+=
