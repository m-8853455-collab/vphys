<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys – The Virtual Physics Lab</title>

<style>
body { font-family: Arial, sans-serif; margin:0; background:#eef2f7; }
header { background:#1e3a8a; color:white; padding:20px; text-align:center; }
.container { display:flex; gap:20px; margin:20px; }
section { background:white; padding:20px; border-radius:8px; }
.controls { width:340px; }
canvas { border:1px solid black; background:#e6f7fb; touch-action:none; }
button {
  padding:8px 14px; background:#1e3a8a; color:white;
  border:none; border-radius:5px; margin-top:6px; cursor:pointer;
}
footer { background:#1e3a8a; color:white; text-align:center; padding:10px; }

/* formula table */
.formula-table { width:100%; border-collapse:collapse; margin-top:15px; }
.formula-table th, .formula-table td {
  border:1px solid #333; padding:8px; text-align:center;
}
.formula-table th { background:#1e3a8a; color:white; }
.formula-table td { font-family:"Courier New", monospace; font-size:14px; }
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>The Virtual Physics Lab</p>
</header>

<div class="container">

<section>
<canvas id="sim" width="600" height="350"></canvas>

<h3>Projectile Motion Formula Reference</h3>
<table class="formula-table">
<tr><th>x-axis</th><th>y-axis</th></tr>
<tr><td>aₓ = 0</td><td>aᵧ = −g</td></tr>
<tr><td>Vₓ = uₓ</td><td>Vᵧ = uᵧ − gt</td></tr>
<tr><td>Sₓ = uₓt</td><td>Sᵧ = uᵧt − ½gt²</td></tr>
<tr><td>Sₓ = ½(uₓ+Vₓ)t</td><td>Sᵧ = ½(uᵧ+Vᵧ)t</td></tr>
</table>
</section>

<section class="controls">
<h3>Projectile Inputs</h3>

<p>Initial speed u (m/s)</p>
<input type="number" id="u" value="20">

<p>Launch angle θ (°)</p>
<input type="number" id="theta" value="45">

<p>Platform height h (m)</p>
<input type="number" id="platformH" value="5">

<p>Environment</p>
<select id="env">
  <option value="9.8">Earth</option>
  <option value="1.62">Moon</option>
</select>

<button onclick="launch()">▶ Start</button>
<button onclick="zoomIn()">➕ Zoom In</button>
<button onclick="zoomOut()">➖ Zoom Out</button>

<hr>

<h3>Results</h3>
<p>t = <span id="time">–</span> s</p>
<p>Sx = <span id="sx">–</span> m</p>
<p>Sy = <span id="sy">–</span> m</p>
<p>Vx = <span id="vx">–</span> m/s</p>
<p>Vy = <span id="vy">–</span> m/s</p>
<p>v = <span id="vr">–</span> m/s</p>
</section>

</div>

<section>
<h2>Work–Energy Theorem</h2>
<p>W = F s cosθ = ΔKE</p>

<p>Force (N)</p><input id="weForce" value="10">
<p>Displacement (m)</p><input id="weDisplacement" value="5">
<p>Angle (°)</p><input id="weAngle" value="0">
<p>Initial velocity (m/s)</p><input id="weU" value="0">
<p>Mass (kg)</p><input id="weMass" value="2">

<button onclick="calculateWorkEnergy()">Calculate</button>

<p>Work = <span id="weWork">–</span> J</p>
<p>KE initial = <span id="weKEi">–</span> J</p>
<p>KE final = <span id="weKEf">–</span> J</p>
</section>

<footer>© 2026 VPhys – The Virtual Physics Lab</footer>

<script>
const canvas=document.getElementById("sim");
const ctx=canvas.getContext("2d");

const groundY=canvas.height-20;
let scale=5, platformY=groundY;
let path=[], dragIndex=0, dragging=false, animIndex=0, animating=false;

function zoomIn(){ scale*=1.2; draw(); }
function zoomOut(){ scale/=1.2; draw(); }

function launch(){
  const u=+u.value, th=+theta.value*Math.PI/180;
  const g=+env.value, h=+platformH.value;
  const ux=u*Math.cos(th), uy=u*Math.sin(th);

  platformY=groundY-h*scale;
  path=[{x:0,y:h,ux,uy,t:0}];
  for(let t=0.05;t<30;t+=0.05){
    const x=ux*t, y=h+uy*t-0.5*g*t*t;
    if(y<0) break;
    path.push({x,y,ux,uy,t});
  }
  animIndex=0; animating=true; dragging=false; animate();
}

function animate(){
  if(!animating) return;
  dragIndex=animIndex; draw();
  if(++animIndex>=path.length){ animating=false; dragging=true; }
  requestAnimationFrame(animate);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="blue";
  ctx.fillRect(0,groundY,canvas.width,5);
  ctx.fillRect(0,platformY,80,5);

  ctx.fillStyle="black";
  path.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x*scale,groundY-p.y*scale,2,0,Math.PI*2);
    ctx.fill();
  });

  if(!path.length) return;
  const p=path[dragIndex];
  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.arc(p.x*scale,groundY-p.y*scale,6,0,Math.PI*2);
  ctx.fill();

  const vy=p.uy-(+env.value)*p.t;
  time.textContent=p.t.toFixed(2);
  sx.textContent=p.x.toFixed(2);
  sy.textContent=p.y.toFixed(2);
  vx.textContent=p.ux.toFixed(2);
  vySpan=vy.toFixed(2); document.getElementById("vy").textContent=vySpan;
  vr.textContent=Math.sqrt(p.ux*p.ux+vy*vy).toFixed(2);
}

canvas.addEventListener("pointerdown",()=>{ if(!animating) dragging=true; });
canvas.addEventListener("pointerup",()=>dragging=false);
canvas.addEventListener("pointermove",e=>{
  if(!dragging) return;
  const x=(e.clientX-canvas.getBoundingClientRect().left)/scale;
  let c=0; path.forEach((p,i)=>{ if(Math.abs(p.x-x)<Math.abs(path[c].x-x)) c=i; });
  dragIndex=c; draw();
});

function calculateWorkEnergy(){
  const F=+weForce.value, s=+weDisplacement.value;
  const th=+weAngle.value*Math.PI/180;
  const u=+weU.value, m=+weMass.value;
  const W=F*s*Math.cos(th), KEi=0.5*m*u*u, KEf=KEi+W;
  weWork.textContent=W.toFixed(2);
  weKEi.textContent=KEi.toFixed(2);
  weKEf.textContent=KEf.toFixed(2);
}
</script>

</body>
</html>
