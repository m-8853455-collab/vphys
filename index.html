<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys â€“ The Virtual Physics Lab</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #eef2f7;
}
header {
    background: #1e3a8a;
    color: white;
    padding: 20px;
    text-align: center;
}
.container {
    display: flex;
    gap: 20px;
    margin: 20px;
}
section {
    background: white;
    padding: 20px;
    border-radius: 8px;
}
.controls {
    width: 340px;
}
canvas {
    border: 1px solid black;
    background: #e6f7fb;
}
h2, h3 {
    color: #1e3a8a;
}
button {
    padding: 8px 14px;
    background: #1e3a8a;
    color: white;
    border: none;
    border-radius: 5px;
    margin-top: 6px;
    cursor: pointer;
}
button.secondary {
    background: #555;
}
input[type=range] {
    width: 100%;
}
footer {
    background: #1e3a8a;
    color: white;
    text-align: center;
    padding: 10px;
}
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>The Virtual Physics Lab</p>
</header>

<div class="container">

<section>
<canvas id="sim" width="600" height="350"></canvas>
</section>

<section class="controls">
<h3>Projectile Controls</h3>

<label>Initial speed u (m/s)</label>
<input type="number" id="u" value="20">

<label>Launch angle Î¸ (Â°)</label>
<input type="number" id="theta" value="45">

<label>Platform height h (m)</label>
<input type="number" id="platformH" value="5">

<label>Environment</label>
<select id="env">
    <option value="9.8">Earth</option>
    <option value="1.62">Moon</option>
</select>

<button onclick="addPath()">â–¶ Start (Add Path)</button>
<button class="secondary" onclick="resetPaths()">ðŸ”„ Reset</button>

<hr>

<h3>View Controls</h3>
<button onclick="zoomIn()">âž• Zoom In</button>
<button onclick="zoomOut()">âž– Zoom Out</button>

<label>Animation Speed</label>
<input type="range" min="0.5" max="3" step="0.1" value="1" id="speed">

<p><small>Tip: Add multiple paths to compare trajectories.</small></p>
</section>

</div>

<!-- ================= FORCE ================= -->
<section>
<h2>Force Simulator (F = ma)</h2>
<p>Mass (kg):</p>
<input type="number" id="mass" value="2">
<p>Force (N):</p>
<input type="number" id="force" value="10">
<button onclick="calculateForce()">Calculate</button>
<p>Acceleration a = <span id="acc">â€“</span> m/sÂ²</p>
</section>

<!-- ================= ELECTRICITY ================= -->
<section>
<h2>Electricity Simulator (V = IR)</h2>
<p>Voltage (V):</p>
<input type="number" id="voltage" value="12">
<p>Resistance (Î©):</p>
<input type="number" id="resistance" value="6">
<button onclick="calculateCurrent()">Calculate</button>
<p>Current I = <span id="current">â€“</span> A</p>
</section>

<footer>
&copy; 2026 VPhys â€“ The Virtual Physics Lab
</footer>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

const groundY = canvas.height - 20;
let platformY = groundY;

let scale = 5;               // zoom scale
let speed = 1;               // animation speed

let allPaths = [];
let currentPath = null;
let animIndex = 0;
let animating = false;

const colors = ["red","green","purple","orange","brown","darkcyan"];

/* ---------- ZOOM ---------- */
function zoomIn() {
    scale *= 1.2;
    draw();
}
function zoomOut() {
    scale /= 1.2;
    draw();
}

/* ---------- ADD PATH ---------- */
function addPath() {
    const u = +uInput.value;
    const thetaDeg = +thetaInput.value;
    const theta = thetaDeg * Math.PI / 180;
    const g = +env.value;
    const h = +platformH.value;

    platformY = groundY - h * scale;

    const ux = u * Math.cos(theta);
    const uy = u * Math.sin(theta);

    let path = [];
    path.push({x:0, y:h, ux, uy, t:0});

    for (let t=0.05; t<30; t+=0.05) {
        const x = ux * t;
        const y = h + uy * t - 0.5 * g * t * t;
        if (y < 0) break;
        path.push({x,y,ux,uy,t});
    }

    const color = colors[allPaths.length % colors.length];
    allPaths.push({points:path, color});
    currentPath = path;

    animIndex = 0;
    animating = true;
    animate();
}

/* ---------- RESET ---------- */
function resetPaths() {
    allPaths = [];
    currentPath = null;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    draw();
}

/* ---------- ANIMATION ---------- */
function animate() {
    if (!animating) return;

    draw(animIndex);
    animIndex += speed;

    if (animIndex >= currentPath.length) {
        animating = false;
        return;
    }
    requestAnimationFrame(animate);
}

/* ---------- DRAW ---------- */
function draw(activeIndex=null) {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // platforms (blue)
    ctx.fillStyle = "blue";
    ctx.fillRect(0, groundY, canvas.width, 5);
    ctx.fillRect(0, platformY, 80, 5);

    // trajectories
    allPaths.forEach(obj=>{
        ctx.fillStyle = obj.color;
        obj.points.forEach((p,i)=>{
            if (activeIndex!==null && obj.points===currentPath && i>activeIndex) return;
            ctx.beginPath();
            ctx.arc(p.x*scale, groundY - p.y*scale, 2, 0, Math.PI*2);
            ctx.fill();
        });
    });

    // moving ball
    if (currentPath && activeIndex!==null) {
        const p = currentPath[Math.floor(activeIndex)];
        ctx.fillStyle = "black";
        ctx.beginPath();
        ctx.arc(p.x*scale, groundY - p.y*scale, 6, 0, Math.PI*2);
        ctx.fill();
    }
}

/* ---------- FORCE ---------- */
function calculateForce() {
    acc.innerText = (+force.value / +mass.value).toFixed(2);
}

/* ---------- ELECTRICITY ---------- */
function calculateCurrent() {
    current.innerText = (+voltage.value / +resistance.value).toFixed(2);
}

/* ---------- INPUT REFERENCES ---------- */
const uInput = document.getElementById("u");
const thetaInput = document.getElementById("theta");
const platformH = document.getElementById("platformH");
const env = document.getElementById("env");
document.getElementById("speed").addEventListener("input", e=>{
    speed = +e.target.value;
});
</script>

</body>
</html>
