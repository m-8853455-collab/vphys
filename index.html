<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys – Virtual Physics Lab</title>

<style>
body { font-family: Arial, sans-serif; background:#eef2f7; margin:0; }
header { background:#1e3a8a; color:white; text-align:center; padding:20px; }
.container { display:flex; gap:20px; margin:20px; }
section { background:white; padding:20px; border-radius:8px; }
.controls { width:340px; }
canvas { border:1px solid black; background:#e6f7fb; }
label { font-weight:bold; }
input, select {
    width:100%;
    padding:6px;
    margin-bottom:8px;
}
.readonly {
    background:#f0f0f0;
}
button {
    background:#1e3a8a;
    color:white;
    border:none;
    padding:10px;
    cursor:pointer;
}
footer { background:#1e3a8a; color:white; text-align:center; padding:10px; }
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>Projectile Motion – Known & Unknown Data</p>
</header>

<div class="container">

<section>
<canvas id="sim" width="600" height="350"></canvas>
</section>

<section class="controls">

<h3>Known (Input) Data</h3>

<label>Initial speed u (m/s)</label>
<input type="number" id="u" value="20">

<label>Launch angle θ (°)</label>
<input type="number" id="theta" value="45">

<label>Platform height h (m)</label>
<input type="number" id="platformH" value="5">

<label>Environment</label>
<select id="env">
    <option value="9.8">Earth</option>
    <option value="1.62">Moon</option>
</select>

<button onclick="launch()">▶ Start</button>

<hr>

<h3>Calculated (Unknown) Data</h3>

<label>Time t (s)</label>
<input class="readonly" id="time" readonly>

<label>Sx (m)</label>
<input class="readonly" id="sx" readonly>

<label>Sy (m)</label>
<input class="readonly" id="sy" readonly>

<label>Vx (m/s)</label>
<input class="readonly" id="vx" readonly>

<label>Vy (m/s)</label>
<input class="readonly" id="vy" readonly>

<label>Resultant velocity v (m/s)</label>
<input class="readonly" id="vr" readonly>

<label>Horizontal range (m)</label>
<input class="readonly" id="range" readonly>

<label>Maximum height (m)</label>
<input class="readonly" id="maxH" readonly>

</section>
</div>

<footer>
&copy; 2026 VPhys – The Virtual Physics Lab
</footer>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

const groundY = canvas.height - 20;
let path = [];
let dragIndex = 0;
let animIndex = 0;
let animating = false;

function launch() {
    const u = +uInput.value;
    const thetaDeg = +thetaInput.value;
    const h = +platformH.value;
    const g = +env.value;

    const theta = thetaDeg * Math.PI / 180;
    const ux = u * Math.cos(theta);
    const uy = u * Math.sin(theta);

    path = [{x:0, y:h, ux, uy, t:0}];

    for (let t=0.05; t<30; t+=0.05) {
        const x = ux*t;
        const y = h + uy*t - 0.5*g*t*t;
        if (y < 0) break;
        path.push({x,y,ux,uy,t});
    }

    const T = (uy + Math.sqrt(uy*uy + 2*g*h)) / g;
    range.value = (ux*T).toFixed(2);
    maxH.value = (h + uy*uy/(2*g)).toFixed(2);
    vx.value = ux.toFixed(2);

    animIndex = 0;
    animating = true;
    animate();
}

function animate() {
    if (!animating) return;
    dragIndex = animIndex;
    draw();
    animIndex++;
    if (animIndex >= path.length) animating = false;
    requestAnimationFrame(animate);
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillRect(0, groundY, canvas.width, 5);

    const p = path[dragIndex];
    ctx.beginPath();
    ctx.arc(p.x*5, groundY - p.y*5, 6, 0, Math.PI*2);
    ctx.fillStyle="red";
    ctx.fill();

    const g = +env.value;
    const vyNow = p.uy - g*p.t;

    time.value = p.t.toFixed(2);
    sx.value = p.x.toFixed(2);
    sy.value = p.y.toFixed(2);
    vy.value = vyNow.toFixed(2);
    vr.value = Math.sqrt(p.ux*p.ux + vyNow*vyNow).toFixed(2);
}

// input references
const uInput = document.getElementById("u");
const thetaInput = document.getElementById("theta");
const platformH = document.getElementById("platformH");
const env = document.getElementById("env");
</script>

</body>
</html>
