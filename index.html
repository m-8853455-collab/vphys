<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys â€“ The Virtual Physics Lab</title>

<style>
body { font-family: Arial, sans-serif; margin:0; background:#eef2f7; }
header { background:#1e3a8a; color:white; text-align:center; padding:20px; }
.container { display:flex; gap:20px; margin:20px; }
section { background:white; padding:20px; border-radius:8px; }
.controls { width:360px; }
canvas { border:1px solid black; background:#e6f7fb; }
button {
    background:#1e3a8a; color:white;
    border:none; border-radius:5px;
    padding:8px 14px; margin-top:6px; cursor:pointer;
}
button.secondary { background:#555; }
input, select { width:100%; margin-bottom:6px; }
.readonly { background:#f0f0f0; }
footer { background:#1e3a8a; color:white; text-align:center; padding:10px; }
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>The Virtual Physics Lab</p>
</header>

<div class="container">

<section>
<canvas id="sim" width="600" height="350"></canvas>
</section>

<section class="controls">

<h3>Projectile Inputs (Given)</h3>

<label>Initial speed u (m/s)</label>
<input type="number" id="u" value="20">

<label>Launch angle Î¸ (Â°)</label>
<input type="number" id="theta" value="45">

<label>Platform height h (m)</label>
<input type="number" id="platformH" value="5">

<label>Environment</label>
<select id="env">
    <option value="9.8">Earth</option>
    <option value="1.62">Moon</option>
</select>

<button onclick="addPath()">â–¶ Start (Add Path)</button>
<button class="secondary" onclick="resetPaths()">ðŸ”„ Reset</button>

<hr>

<h3>Calculated Results (Unknown)</h3>

<label>Time t (s)</label>
<input class="readonly" id="time" readonly>

<label>Sx (m)</label>
<input class="readonly" id="sx" readonly>

<label>Sy (m)</label>
<input class="readonly" id="sy" readonly>

<label>Vx (m/s)</label>
<input class="readonly" id="vx" readonly>

<label>Vy (m/s)</label>
<input class="readonly" id="vy" readonly>

<label>Resultant velocity v (m/s)</label>
<input class="readonly" id="vr" readonly>

<label>Horizontal range (m)</label>
<input class="readonly" id="range" readonly>

<label>Maximum height (m)</label>
<input class="readonly" id="maxH" readonly>

<hr>

<h3>View Controls</h3>
<button onclick="zoomIn()">âž• Zoom In</button>
<button onclick="zoomOut()">âž– Zoom Out</button>

<label>Animation speed</label>
<input type="range" min="0.5" max="3" step="0.1" value="1" id="speed">

</section>
</div>

<section>
<h2>Force Simulator (F = ma)</h2>
<input type="number" id="mass" value="2">
<input type="number" id="force" value="10">
<button onclick="calculateForce()">Calculate</button>
<p>a = <span id="acc">â€“</span> m/sÂ²</p>
</section>

<section>
<h2>Electricity Simulator (V = IR)</h2>
<input type="number" id="voltage" value="12">
<input type="number" id="resistance" value="6">
<button onclick="calculateCurrent()">Calculate</button>
<p>I = <span id="current">â€“</span> A</p>
</section>

<footer>
&copy; 2026 VPhys â€“ The Virtual Physics Lab
</footer>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

const groundY = canvas.height - 20;
let platformY = groundY;
let scale = 5;
let speed = 1;

let allPaths = [];
let currentPath = null;
let animIndex = 0;
let animating = false;

const colors = ["red","green","purple","orange","brown","darkcyan"];

function zoomIn(){ scale*=1.2; draw(); }
function zoomOut(){ scale/=1.2; draw(); }

function addPath() {
    const u = +uInput.value;
    const thetaDeg = +thetaInput.value;
    const theta = thetaDeg*Math.PI/180;
    const g = +env.value;
    const h = +platformH.value;

    platformY = groundY - h*scale;

    const ux = u*Math.cos(theta);
    const uy = u*Math.sin(theta);

    let path=[{x:0,y:h,ux,uy,t:0}];
    for(let t=0.05;t<30;t+=0.05){
        const x=ux*t;
        const y=h+uy*t-0.5*g*t*t;
        if(y<0) break;
        path.push({x,y,ux,uy,t});
    }

    allPaths.push({points:path,color:colors[allPaths.length%colors.length]});
    currentPath=path;

    const T=(uy+Math.sqrt(uy*uy+2*g*h))/g;
    range.value=(ux*T).toFixed(2);
    maxH.value=(h+uy*uy/(2*g)).toFixed(2);
    vx.value=ux.toFixed(2);

    animIndex=0;
    animating=true;
    animate();
}

function animate(){
    if(!animating) return;
    draw(animIndex);
    animIndex+=speed;
    if(animIndex>=currentPath.length){ animating=false; return; }
    requestAnimationFrame(animate);
}

function draw(activeIndex=null){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="blue";
    ctx.fillRect(0,groundY,canvas.width,5);
    ctx.fillRect(0,platformY,80,5);

    allPaths.forEach(obj=>{
        ctx.fillStyle=obj.color;
        obj.points.forEach((p,i)=>{
            if(activeIndex!==null && obj.points===currentPath && i>activeIndex) return;
            ctx.beginPath();
            ctx.arc(p.x*scale,groundY-p.y*scale,2,0,Math.PI*2);
            ctx.fill();
        });
    });

    if(currentPath && activeIndex!==null){
        const p=currentPath[Math.floor(activeIndex)];
        ctx.fillStyle="black";
        ctx.beginPath();
        ctx.arc(p.x*scale,groundY-p.y*scale,6,0,Math.PI*2);
        ctx.fill();

        const g=+env.value;
        const vyNow=p.uy-g*p.t;
        time.value=p.t.toFixed(2);
        sx.value=p.x.toFixed(2);
        sy.value=p.y.toFixed(2);
        vy.value=vyNow.toFixed(2);
        vr.value=Math.sqrt(p.ux*p.ux+vyNow*vyNow).toFixed(2);
    }
}

function resetPaths(){ allPaths=[]; currentPath=null; ctx.clearRect(0,0,canvas.width,canvas.height); draw(); }

function calculateForce(){ acc.innerText=(+force.value/+mass.value).toFixed(2); }
function calculateCurrent(){ current.innerText=(+voltage.value/+resistance.value).toFixed(2); }

const uInput=u, thetaInput=theta;
speedSlider=document.getElementById("speed");
speedSlider.oninput=e=>speed=+e.target.value;
</script>

</body>
</html>
