<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VPhys – Projectile Motion Simulator</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f4f6f8;
}
header {
    background: #1e3a8a;
    color: white;
    padding: 20px;
    text-align: center;
}
section {
    background: white;
    margin: 20px;
    padding: 20px;
    border-radius: 8px;
}
h2 {
    color: #1e3a8a;
}
button {
    padding: 10px 15px;
    background: #1e3a8a;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
canvas {
    border: 1px solid black;
    touch-action: none;
}
</style>
</head>

<body>

<header>
<h1>VPhys</h1>
<p>Interactive Projectile Motion Simulator</p>
</header>

<section>
<h2>Projectile Motion</h2>

<p>Initial speed u (m/s):</p>
<input type="number" id="u" value="20">

<p>Launch angle θ (degrees):</p>
<input type="number" id="theta" value="45">

<p>Platform height (m):</p>
<input type="number" id="platformH" value="0">

<p>Environment:</p>
<select id="env">
    <option value="9.8">Earth</option>
    <option value="1.62">Moon</option>
</select>

<br><br>
<button onclick="launch()">Launch</button>

<br><br>
<canvas id="sim" width="600" height="300"></canvas>

<p><strong>Real-time data (drag the red point):</strong></p>
<p>x = <span id="px">–</span> m</p>
<p>y = <span id="py">–</span> m</p>
<p>Resultant velocity v = <span id="vr">–</span> m/s</p>
</section>

<footer style="background:#1e3a8a;color:white;text-align:center;padding:10px;">
&copy; 2026 VPhys
</footer>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

let platformY = canvas.height - 20;
let path = [];
let dragging = false;
let dragIndex = 0;

function launch() {
    const u = Number(document.getElementById("u").value);
    const theta = Number(document.getElementById("theta").value) * Math.PI / 180;
    const g = Number(document.getElementById("env").value);
    const h = Number(document.getElementById("platformH").value);

    platformY = canvas.height - 20 - h * 5;

    const ux = u * Math.cos(theta);
    const uy = u * Math.sin(theta);

    path = [];
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Start ON the platform
    path.push({ x:0, y:0, ux, uy, t:0 });

    for (let t=0.05; t<10; t+=0.05) {
        const x = ux * t;
        const y = uy * t - 0.5 * g * t * t;
        if (y < 0) break;
        path.push({ x, y, ux, uy, t });
    }

    draw();
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // platform
    ctx.fillRect(0, platformY, canvas.width, 5);

    // trajectory dots
    ctx.fillStyle = "black";
    path.forEach(p=>{
        ctx.beginPath();
        ctx.arc(p.x*5, platformY - p.y*5, 2, 0, Math.PI*2);
        ctx.fill();
    });

    const p = path[dragIndex];

    // ball
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(p.x*5, platformY - p.y*5, 6, 0, Math.PI*2);
    ctx.fill();

    // velocity vectors
    const g = Number(document.getElementById("env").value);
    const vy = p.uy - g * p.t;

    // Vx (blue)
    ctx.strokeStyle = "blue";
    ctx.beginPath();
    ctx.moveTo(p.x*5, platformY - p.y*5);
    ctx.lineTo(p.x*5 + p.ux*2, platformY - p.y*5);
    ctx.stroke();

    // Vy (green)
    ctx.strokeStyle = "green";
    ctx.beginPath();
    ctx.moveTo(p.x*5, platformY - p.y*5);
    ctx.lineTo(p.x*5, platformY - p.y*5 - vy*2);
    ctx.stroke();

    updateData(p);
}

function updateData(p) {
    const g = Number(document.getElementById("env").value);
    const vy = p.uy - g*p.t;
    const vr = Math.sqrt(p.ux*p.ux + vy*vy);

    document.getElementById("px").innerText = p.x.toFixed(2);
    document.getElementById("py").innerText = p.y.toFixed(2);
    document.getElementById("vr").innerText = vr.toFixed(2);
}

canvas.addEventListener("pointerdown", ()=> dragging=true);
canvas.addEventListener("pointerup", ()=> dragging=false);

canvas.addEventListener("pointermove", (e)=>{
    if (!dragging) return;
    const rect = canvas.getBoundingClientRect();
    const x = (e.clientX - rect.left)/5;

    let closest = 0;
    path.forEach((p,i)=>{
        if (Math.abs(p.x-x) < Math.abs(path[closest].x-x)) {
            closest = i;
        }
    });
    dragIndex = closest;
    draw();
});
</script>

</body>
</html>
